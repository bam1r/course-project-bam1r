# STRIDE Threat Analysis

Анализ угроз по методологии STRIDE для системы Equipment Checkout.

## Легенда STRIDE

- **S** - Spoofing (подмена)
- **T** - Tampering (изменение)
- **R** - Repudiation (отказ от авторства)
- **I** - Information Disclosure (раскрытие информации)
- **D** - Denial of Service (отказ в обслуживании)
- **E** - Elevation of Privilege (повышение привилегий)

## Таблица STRIDE

| Поток/Элемент | Угроза (STRIDE) | Описание угрозы | Контроль | NFR Reference |
|---------------|-----------------|-----------------|----------|---------------|
| F1: User → API Gateway | **T** | Изменение данных запроса в пути (например, user_id в URL) | Валидация входных данных, проверка прав доступа | NFR-003, NFR-002 |
| F1: User → API Gateway | **I** | Перехват credentials или токенов в открытом виде | Обязательное использование HTTPS, токены в заголовках | NFR-007 |
| F3: Auth Service → AuthZ Middleware | **E** | Повышение привилегий через изменение role в контексте | Проверка role из базы данных, не доверять данным из токена | NFR-002 |
| F4: AuthZ Middleware → Business Logic | **E** | Обход проверки авторизации через прямой доступ к бизнес-логике | Обязательная проверка авторизации перед обработкой | NFR-002 |
| F5: User Service → Database | **T** | Изменение данных пользователей (например, изменение role на admin) | Проверка прав доступа, логирование изменений | NFR-002, NFR-008 |
| F6: Asset Service → Database | **T** | Изменение данных оборудования без авторизации | Проверка прав доступа (только admin) | NFR-002 |
| F6: Asset Service → Database | **I** | Раскрытие инвентарных номеров неавторизованным пользователям | Проверка авторизации перед доступом | NFR-001, NFR-002 |
| F7: Checkout Service → Database | **T** | Изменение статуса checkout без валидации бизнес-правил | Валидация переходов состояний | NFR-009 |
| F7: Checkout Service → Database | **E** | Студент изменяет чужой checkout | Проверка owner-only доступа | NFR-002 |
| F7: Checkout Service → Database | **R** | Отказ от создания/изменения checkout | Логирование всех операций с checkout | NFR-008 |
| F8: API Gateway → User | **I** | Утечка чувствительных данных в ответах (пароли, токены) | Фильтрация чувствительных полей в ответах | NFR-003 |

## Сводка по типам угроз

| Тип угрозы | Количество | Критичность |
|------------|------------|-------------|
| **S** - Spoofing | 0          | Высокая |
| **T** - Tampering | 4          | Высокая |
| **R** - Repudiation | 1          | Средняя |
| **I** - Information Disclosure | 3          | Высокая |
| **D** - Denial of Service | 0          | Средняя |
| **E** - Elevation of Privilege | 3          | Критическая |

## Приоритизация

**Критичные угрозы (требуют немедленного контроля):**
- E: Повышение привилегий (4 угрозы)
- T: Изменение данных (7 угроз)
- I: Раскрытие информации (8 угроз)
- S: Подмена (3 угрозы)

**Средние угрозы (можно отложить):**
- D: Отказ в обслуживании (3 угрозы)
- R: Отказ от авторства (2 угрозы)
